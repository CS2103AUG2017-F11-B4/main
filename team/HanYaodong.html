<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Yaodong Han - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Yaodong Han - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-address-book-pro"><a class="link" href="#project-address-book-pro">Project: Address Book Pro</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>AddressBook - Level 4 is a desktop address book application used for teaching Software Engineering principles. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 6 kLoC.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103AUG2017-F11-B4/main/blob/master/collated/main/HanYaodong.md">Functional code</a>] [<a href="https://github.com/CS2103AUG2017-F11-B4/main/blob/master/collated/test/HanYaodong.md">Test code</a>]</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-export-import-command"><a class="link" href="#enhancement-added-export-import-command">Enhancement Added: Export/Import command</a></h3>
<div class="sect3">
<h4 id="external-behavior"><a class="link" href="#external-behavior">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exporting-a-list-of-persons-code-export-code"><a class="link" href="#exporting-a-list-of-persons-code-export-code">Exporting a list of persons : <code>export</code></a></h3>
<div class="paragraph">
<p>Exports persons identified by the index numbers used in the last person listing to a specified save file.<br>
Format: <code>export INDEXES ; FILE_PATH</code><br></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The indexes must be positive numbers or two indexes linked by "-" (e. g. "1-4"), and they should be separated by whitespaces or commas (e.g. 1-3, 4 6).</p>
</li>
<li>
<p>The indexes refers to the index number shown in the most recent listing.</p>
</li>
<li>
<p><code>INDEXES</code> and <code>FILE_PATH</code> must be separated by ";".</p>
</li>
<li>
<p>If the given file exsits, it will be overwritten without warning.</p>
</li>
<li>
<p>The persons are exported to a XML format file, so a <code>.xml</code> extension will be automatically added, if the given file does not have one.</p>
</li>
<li>
<p>The <code>FILE_PATH</code> can be in relative path or absolute path.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>list</code><br>
<code>export 1-3, 5; Persons.xml</code><br>
Exports 1st, 2nd, 3rd and 5th person in the address book to <code>Persons.xml</code> in the current working directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since v1.1.</p>
</div>
</div>
<div class="sect2">
<h3 id="import-persons-from-a-file-code-import-code"><a class="link" href="#import-persons-from-a-file-code-import-code">Import persons from a file : <code>import</code></a></h3>
<div class="paragraph">
<p>Imports a list of persons from a save file to the address book.<br>
Format: <code>import FILE_PATH</code><br></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>This command is designed to work with file generated by <code>export</code> command.</p>
</li>
<li>
<p>If you want to edit the file yourself, please make sure that it is in XML format and contains all required information.</p>
</li>
<li>
<p>The save file cannot contain identical persons; otherwise, import command will be cancelled.</p>
</li>
<li>
<p><code>FILE_PATH</code> can be relative path or absolute path.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>import ../MyContacts.xml</code><br>
Imports MyContacts.xml relative to your working directory.</p>
</li>
<li>
<p><code>import C:\Users\User_name\Documents\Persons.xml</code><br>
<code>import /Users/User_name/Documents/Persons/xml</code><br>
Import command supports different platforms and corresponding style.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since v1.2.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>User may want to transport part of their address book contacts to another location, or to share with their friends of their common friends. An export and import command can be useful in this situation, so that users do not need to pick the ones they want to share in a big .xml file and risk of breaking it.<br></p>
</div>
<div class="paragraph">
<p>Currently, the export command can accept a list of indexes to refer to the persons, and a file path to store the person list. The file then can be imported into another address book, and manuel editing is also feasible for advanced users.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="export-import-mechanism"><a class="link" href="#export-import-mechanism">Export/Import mechanism</a></h3>
<div class="paragraph">
<p>We are using XML file to export and import data in address book. Export and Import are designed to allow users to share contacts with each other or synchronize their data in different devices. A list of persons with all information will be written into a specified file in XML format in <code>export</code> command. And <code>import</code> command will be able to read the file generate, and add the person list into the address book.</p>
</div>
<div class="paragraph">
<p><code>export</code> command accepts a list of indexes and a file path. (e.g. <code>export INDEXES;FILE_PATH</code>) The arguments will be passed to <code>ExportCommandParser#parse()</code> method, which will parse two parameters and create a <code>ExportCommand</code> object. Then <code>execute()</code> will be called by <code>LogicManager</code> after setting the address book data.</p>
</div>
<div class="paragraph">
<p>A <code>List&lt;ReadOnlyPerson&gt;</code> is created by mapping the indexes and <code>filteredPersonList</code> in <code>Model</code>, and then saved using <code>PersonListStorage#savePersonList()</code>. The <code>PersonListStorage</code> interface is implemented by <code>XmlPersonListStorage</code>, where the <code>Person</code> is mapped to <code>XmlAdaptedPerson</code> and stored in <code>XmlSerializablePersonList</code>. Then the XML <code>Marshaller</code> writes all data into the file specified.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the export operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ExportCommandSequenceDiagram.png" alt="ExportCommandSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>When <code>import</code> command is entered, the XML <code>Unmarshaller</code> will read the file and return a <code>XmlSerializablePersonList</code> object that contains the Person List. The the List is internally converted to a <code>UniquePersonList</code> by <code>XmlSerializablePersonList#getPersons()</code>, and returned to <code>ImportCommand</code>. Then the <code>Person`s are added to the address book sequentially by `Model#addPerson(Person)</code>.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the import operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ImportCommandSequenceDiagram.png" alt="ImportCommandSequenceDiagram" width="800">
</div>
</div>
<div class="sect3">
<h4 id="design-consideration"><a class="link" href="#design-consideration">Design Consideration</a></h4>
<div class="paragraph">
<p><strong>Aspect</strong> Format of export file<br>
<strong>Alternative 1 (current choice):</strong> Use XML format<br>
<strong>Pros:</strong> XML format are currently used for saving the address book, so the save method has already been implemented<br>
<strong>Cons:</strong> Person list need to be transformed to a XML root class while saving and transformed back while reading file<br>
<strong>Alternative 2:</strong> Save add command as plan text<br>
<strong>Pros:</strong> Generating command is easy and can be directly used<br>
<strong>Cons:</strong> Needs to implement new file writer and reader<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect</strong> The return type of <code>XmlPersonListStorage#readPersonList()</code><br>
<strong>Alternative 1 (current choice):</strong> Use <code>UniquePersonList</code><br>
<strong>Pros:</strong> The persons are unique when adding to address book<br>
<strong>Cons:</strong> Needs to handle exception when encounter duplicated persons in the file<br>
<strong>Alternative 2:</strong> Use <code>List&lt;ReadOnlyPerson&gt;</code><br>
<strong>Pros:</strong> Has no need to worry about reading the file<br>
<strong>Cons:</strong> Cannot tell the <code>DuplicatedPersonException</code> is caused by persons in file or in address book<br></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-auto-complete"><a class="link" href="#enhancement-added-auto-complete">Enhancement Added: Auto-complete</a></h3>
<div class="sect3">
<h4 id="external-behavior-2"><a class="link" href="#external-behavior-2">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="auto-complete-commands"><a class="link" href="#auto-complete-commands">Auto-complete commands</a></h3>
<div class="paragraph">
<p>Address book has auto-complete function for the commands. If you hit <code>TAB</code> in the command box or if you try to execute an error command, the command box will show the auto-completed command and suggestions.<br></p>
</div>
<div class="paragraph">
<p>The auto-complete function will work in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fill in fields that is not been inputed by the user. (add, edit)</p>
</li>
<li>
<p>remove non-digit characters when an index is expected. (delete, export, select)</p>
</li>
<li>
<p>try to find the position of the delimiter when it cannot be found. (export)</p>
</li>
<li>
<p>trim unnecessary white spaces.</p>
</li>
<li>
<p>complete the command when the prefix of a certain command is inputted.</p>
</li>
<li>
<p>try to guess what command is being inputting when the command word is invalid.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since v1.3.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification-2"><a class="link" href="#justification-2">Justification</a></h4>
<div class="paragraph">
<p>Command can be complicated for a CLT system while more and more functions are introduced. Entering a long command just to do a simple thing can be boring, so auto-complete is necessary in most places.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-2"><a class="link" href="#implementation-2">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="auto-complete"><a class="link" href="#auto-complete">Auto-Complete</a></h3>
<div class="paragraph">
<p>All auto-complete functions are implemented in one class, <code>AutoComplete</code>, including command fill-in and command word guess.<br></p>
</div>
<div class="paragraph">
<p>When user hits <code>TAB</code> in the CommandBox, or when a <code>ParserException</code> or <code>CommandException</code> is thrown, <code>CommandBox</code> will call <code>LogicManager#autoComplete</code> and set text to the return String. <code>LogicManager#autoComplete</code> will call <code>AutoComplete</code> class, which will return auto-completed command, with current <code>filteredPersonList</code>.<br></p>
</div>
<div class="paragraph">
<p>Inside <code>AutoComplete</code> class, a parser will split the command into command word and arguments. The command word will be matched to the existing commands, if it can be matched, corresponding autoComplete method will be called with arguments. (e. g. if the command is "add n/", <code>addCommandAutoComplete()</code> will be called) If the command word is invalid, we will try to do a prefix match, and return the suggested command. If the prefix cannot match, a fuzzy search method will be called.<br></p>
</div>
<div class="paragraph">
<p>The fuzzy search calculates levenshtein distance to represent the similarity of two String. If the distance is smaller than half of the length of the correct command word, it will be considered as a hit. For example, if the input command is "port", the levenshtein distance between "port" and "export" will be 2, which is smaller than half of the length of "export" which is 3. So it will be considered as a hit.<br></p>
</div>
<div class="paragraph">
<p>If the command word of the input command is correct, corresponding auto-complete method will be called with argument. These methods do similar things including trimming unnecessary whitespaces, removing non-digit chars when an index is expected, generating all the prefixes that a command needs, filling in fields of a person in filteredPersonList when editing.<br></p>
</div>
<div class="paragraph">
<p>The final return String will be the auto-completed command or a suggestion of possible commands, and will be shown in the CommandBox for further editing.</p>
</div>
<div class="sect3">
<h4 id="design-consideration-2"><a class="link" href="#design-consideration-2">Design Consideration</a></h4>
<div class="paragraph">
<p><strong>Aspect</strong> Method of approximate string matching<br>
<strong>Alternative 1 (current choice):</strong> Levenshtein distance.<br>
<strong>Pros:</strong> Easy to implement and acceptable performance in a small system (18 available commands).<br>
<strong>Cons:</strong> Could run slow in a larger system and the matching acurrate is low.<br>
<strong>Alternative 2:</strong> More advanced matching methods (e. g. Bitap algorithm).<br>
<strong>Pros:</strong> More accurate search with better performance.<br>
<strong>Cons:</strong> Much more difficult to implement.<br></p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update the user stories (Pull request <a href="https://github.com/CS2103AUG2017-F11-B4/main/pull/1">#1</a>, <a href="https://github.com/CS2103AUG2017-F11-B4/main/pull/13">#13</a>)</p>
</li>
<li>
<p>Change all fields except name, phone and email to be optional (Pull request <a href="https://github.com/CS2103AUG2017-F11-B4/main/pull42/">#42</a>)</p>
</li>
<li>
<p>Add Facebook field (Pull request <a href="https://github.com/CS2103AUG2017-F11-B4/main/pull/58">#58</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-13 16:11:35 +00:00
</div>
</div>
</body>
</html>